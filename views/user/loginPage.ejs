<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BnB Collection - Login</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
  />
</head>

<body class="bg-gray-100">
  <!-- Header -->
  <%- include('./partial/header.ejs') %>

  <!-- Main Content -->
  <main class="container mx-auto px-4 py-12">
    <div class="max-w-md mx-auto bg-white rounded-lg shadow-lg p-8 border border-gray-200">
      <h2 class="text-center text-xl font-semibold mb-6">Login to your account</h2>

      <!-- ‚úÖ Login Form -->
      <form id="loginForm" method="POST" action="/login" novalidate>
        <!-- Email -->
        <div class="mb-4">
          <label for="email" class="block text-gray-700 mb-1">Email</label>
          <input
            type="email"
            name="Email"
            id="email"
            placeholder="Enter your email"
            required
            class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:border-gray-400"
          />
          <p id="emailError" class="text-red-500 text-sm mt-1 hidden">
            Please enter a valid email address.
          </p>
        </div>

        <!-- Password -->
        <div class="mb-2 relative">
          <label for="password" class="block text-gray-700 mb-1">Password</label>
          <input
            type="password"
            name="Password"
            id="password"
            placeholder="Enter your password"
            required
            minlength="6"
            class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:border-gray-400"
          />
          <button
            type="button"
            onclick="togglePassword()"
            class="absolute right-3 top-9 text-gray-500"
          >
            <i class="fas fa-eye"></i>
          </button>
          <p id="passwordError" class="text-red-500 text-sm mt-1 hidden">
            Password must be at least 6 characters.
          </p>
        </div>

        <div class="text-left mb-4">
          <a href="#" class="text-sm text-gray-600 hover:text-gray-800"
            >Forget password?</a
          >
        </div>

        <!-- Submit -->
        <button
          type="submit"
          class="w-full bg-red-600 text-white py-2 rounded hover:bg-red-700 transition mb-4"
        >
          Login
        </button>

        <!-- Signup Link -->
        <div class="text-center text-sm mb-4">
          <span class="text-gray-600">Not registered? </span>
          <a href="/register" class="text-blue-600 hover:underline">Sign up</a>
        </div>

        <!-- Google Login -->
        <button
          type="button"
          class="w-full border border-gray-300 py-2 rounded hover:bg-gray-50 transition flex items-center justify-center"
        >
          <img
            src="https://www.google.com/favicon.ico"
            alt="Google"
            class="w-5 h-5 mr-2"
          />
          Login with Google
        </button>
      </form>
    </div>
  </main>

  <!-- Footer -->
  <%- include('./partial/footer.ejs') %>

  <script>
    // üëÅÔ∏è Toggle password visibility
    function togglePassword() {
      const passwordInput = document.getElementById("password");
      const type =
        passwordInput.getAttribute("type") === "password" ? "text" : "password";
      passwordInput.setAttribute("type", type);
    }

    // ‚úÖ Form validation
    document
      .getElementById("loginForm")
      .addEventListener("submit", function (e) {
        const email = document.getElementById("email");
        const password = document.getElementById("password");
        const emailError = document.getElementById("emailError");
        const passwordError = document.getElementById("passwordError");

        let valid = true;

        // Validate email
        const emailPattern = /^[^ ]+@[^ ]+\.[a-z]{2,3}$/;
        if (!email.value.match(emailPattern)) {
          emailError.classList.remove("hidden");
          valid = false;
        } else {
          emailError.classList.add("hidden");
        }

        // Validate password
        if (password.value.trim().length < 6) {
          passwordError.classList.remove("hidden");
          valid = false;
        } else {
          passwordError.classList.add("hidden");
        }

        if (!valid) {
          e.preventDefault(); // stop form from submitting
        }
      });
  </script>
</body>
</html>
